<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Cardápio</title>
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <header class="header_outros">
        <nav id="navbar">
            <div>
                <a id="nav_logo_link" class="" href="">

                    <p id="name_logo">Paladares café</p>
                </a>

            </div>

            <ul id="nav_list">
                <li class="nav-item"><a href="index.html">Home</a></li>
                <li class="nav-item"><a href="./cardapio.html">Cardápio</a></li>
                <li class="nav-item"><a href="./Curiosidades.html">Curiosidades</a></li>
                <li class="nav-item"><a href="./Sobre.html">Sobre</a></li>
                <li class="nav-item"><a href="./contato.html">Contato</a></li>
            </ul>

            <div>
                <button id="btn-peca-agora">
                    PEÇA AGORA
                </button>
            </div>

        </nav>


    </header>
    <main>
    <section class="section-cardapio">
        <h2 class="nosso-cardapio">Nosso <span>Cardápio</span></h2>
        <div class="box-menu">
            <div id="produtos">
                <h3>Produtos</h3>
            </div>
            <div id="sessaoCarrinho">
                <h3>Carrinho:</h3>
            </div>
            <div id="carrinho">
        
            </div>
        
    </section>
   
    <script>
        const entradaCliente = prompt("Digite seu nome.");
       
        const items = [
            {
                id: 0,
                nome: 'Panna',
                img: './img/cardapio/panna.webp',
                quantidade: 0,
                valor: 15.9
            },
            {
                id: 1,
                nome: 'Capuccino Especial',
                img: './img/cardapio/cappuccino-especial.webp',
                quantidade: 0,
                valor: 15.9
            },
            {
                id: 2,
                nome: 'Cappucino Italiano',
                img: './img/cardapio/cappuccino-italiano.webp',
                quantidade: 0,
                valor: 15.9
            },
            {
                id: 3,
                nome: 'Capuccino Sucre',
                img: './img/cardapio/cappuccino-sucre.webp',
                quantidade: 0,
                valor: 15.9
            },
            {
                id: 4,
                nome: 'Macchiato',
                img: './img/cardapio/machiatto.webp',
                quantidade: 0,
                valor: 15.9
            },
            {
                id: 5,
                nome: 'moccha',
                img: './img/cardapio/moccha.webp',
                quantidade: 0,
                valor: 15.9
            }
        ]


        inicializarLoja = () => {
            var containerProdutos = document.getElementById('produtos');
            items.map((val) => {
                containerProdutos.innerHTML+= `
        <div class="produto-single">
        <img src="`+val.img+ `" />
        <p>`+val.nome+ ` : `+val.valor+`</p>
        <a key="`+val.id+ `" href="#" class="btn-carrinho">Adicionar ao carrinho!</a>
        </div>
        `;
            })
        }
        inicializarLoja();
        const itensCarrinho = []
        atualizarCarrinho = () => {
            var containerCarrinho = document.getElementById('carrinho');
            containerCarrinho.innerHTML = "";
            console.log(itensCarrinho);
            itensCarrinho.map((val) => {
                if (val.quantidade > 0) {
                    containerCarrinho.innerHTML+= `
                <p> `+val.nome+ ` : ` +val.quantidade+ ` x ` +val.valor+ `</p>
                <hr>`;
                }
            })
        }
        
        var links = document.getElementsByTagName('a');
        for (var i = 0; i < links.length; i++) {
            links[i].addEventListener("click", function () {
                let key = this.getAttribute('key');
                console.log(key)
                const product = itensCarrinho.find((item) => {
                    return item.id == +key
                } );

                if (product === undefined) {
                    const produtoFinder = items.find((item) => item.id == +key)
                    itensCarrinho.push({
                        ...produtoFinder, 
                        quantidade: 1
                    });
                } else {
                    product.quantidade++
                }
                const total = totalCarrinho();
                 console.log(entradaCliente + " , o seu total é de: " + total + " " + new Date());
                atualizarCarrinho();
                return false;

            })
         
        }
        
       function totalCarrinho() {
        return itensCarrinho.reduce((total,item) => total + (item.quantidade * item.valor), 0)
       }
       
        
    </script>

</main>
<footer class="footer">
    <div class="footer-container">
        <div class="funcionamento">
            <p>Funcionamento</p>
            <p> segunda...... 08:00 - 20:00<br>
                terça......... 08:00 - 20:00<br>
                quarta....... 08:00 - 20:00<br>
                quinta........ 08:00 - 20:00<br>
                sexta.......... 08:00 - 20:00<br>
                sábado....... 07:00 - 12:00<br>
                domingo..... 07:00 - 12:00
            </p>
        </div>

        <div class="localizacao">
            <p>Localização</p>
            <p>Rua dos anzois, 560,
                Ponta Negra, Natal - RN
            </p>
        </div>

        <div class="contato">
            <p>Contato</p>
            <p>TELEFONE: 84 9841 5291</p>
            <P>EMAIL: contato@paladares.com.br</P>
        </div>

        <div class="redes">
            <p>Redes Sociais</p>
            <a href=""><img src="./img/icons/icons8-instagram.svg" alt=""></a>
            <a href=""><img src="./img/icons/icons8-twitter.svg" alt=""></a>
            <a href=""><img src="./img/icons/icons8-facebook-novo.svg" alt=""></a>
        </div>
    </div>
    <p class="copyright"> Todos os direitos reservados &copy; 2024 </p>
</footer>
</body>

</html>